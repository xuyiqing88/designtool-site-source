<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>高级本地翻译工具</title>
<script type="text/javascript" src="http://at.alicdn.com/t/c/font_4814134_3qzqth6qip5.js"></script>
 <script src="menu.js" defer></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
		font-family: 'PingFang SC', 'HarmonyOS_Sans', 'Microsoft YaHei', 'Arial Unicode MS', sans-serif;
            background: #fff;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px 10px;
            color: #333;
        }
.ico{
	width: 1.5em;
	height: 1.5em;
	vertical-align: -0.15em;
	fill: currentColor;
	overflow: hidden;}
.topgroup {
	gap: 10px;
    display: flex;
    position: absolute;
	margin-top: 20px;
    background: #fff;
    border-radius: 30px;
    padding: 4px;
	z-index: 999;
	backdrop-filter: blur(20px);
    -webkit-backdrop-filter: blur(20px);
	box-shadow: 0 0 10px #0000000f;}
.topgroup:hover {
	background:#f2f2f2;
}
.home-icon {
	font-size: 40px;
	cursor: pointer;
    transition: all 0.3s;
    padding: 8px; 
	border-radius: 50%;
	width: 1em; 
	height: 1em;
	vertical-align: -0.15em;
	overflow: hidden;}
:root {
	--main-color: #5963ff;}
.container {
            border-radius: 10px;
            width: 100%;
            max-width: 1100px;
            position: relative;
            overflow: hidden;
            transition: all 0.4s ease;
	    padding: 20px;
        }

        
header {
            text-align: center;
            margin-bottom: 30px;
            position: relative;
        }
        
h2 {
            margin-bottom: 12px;
            position: relative;
            display: flex;
		justify-content: center;
    		align-items: center;
    		gap: 10px;
	    font-size: 1.8rem;
	    color: var(--main-color);
	    margin-top: 20px;
        }
        
        
.subtitle {
            color: #5a6066;
            font-size: 14px;
        }
        
.lang-selector {
            display: flex;
            justify-content: space-between;
            padding: 20px 20px 0;
            border-radius: 8px 8px 0 0;
            margin-bottom: 0;
	gap: 20px;
	align-items: flex-end;
        }
        
.lang-box {
            display: flex;
            flex-direction: column;
            flex: 1;
        }
        
.lang-label {
            font-size: 1.1rem;
            color: #fff;
            margin-bottom: 10px;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 8px;
	    text-shadow: 1px 1px 2px #33333345;
	width: 130px;
        }
        
select {
            width: 100%;
            padding: 8px 18px;
            border: var(--main-color);
            border-radius: 8px;
            background: white;
            font-size: 14px;
            color: #333;
            outline: none;
            transition: all 0.3s;
            appearance: none;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%23696d81'%3E%3Cpath d='M7 10l5 5 5-5z'/%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right 15px center;
            background-size: 16px;
        }
        
select:focus {
            border-color: var(--main-color);
            box-shadow: 0 0 0 3px rgba(89, 99, 255, 0.2);
        }
        
.swap-btn {
		background: #846eff;
		color: var(--main-color);
            border: none;
            border-radius: 50%;
            width: 36px;
            height: 36px;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            transition: all 0.3s;
        }
        
.swap-btn:hover {
            transform: rotate(90deg) scale(1.05);
	background: #5963ff;
	color: #fff;
        }
 .empty-state {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    text-align: center;
    padding: 40px 20px;
    color: var(--sidebar-text);
    font-size: 16px;
	min-height: 260px;
}

.empty-state-icon {
    font-size: 48px;
    margin-bottom: 16px;
    opacity: 0.6;
}       
.text-area {
            border-radius: 0 0 8px 8px;
            overflow: hidden;
            transition: transform 0.3s;
            padding: 20px 0 20px 20px;
                display: flex;
    flex-direction: column;
        }
        
textarea:focus-within {
    	border: 1px solid #5963ff;
	box-shadow: 0 0 0 2px #5963ff33;}
textarea {
            width: 100%;
    		height: 100%;
            padding: 22px;
                border-radius: 6px;
		border: none;
            outline: none;
            resize: vertical;
            font-size: 16px;
            background: linear-gradient(0deg, #ffffff 80%, #ffffffb0);
            color: #333;
            line-height: 1.6;
	min-height: 260px;
	    border: 1px solid #fff;
        }
        
textarea::placeholder {
            color: #aaa;
        }
        
.char-count {
            text-align: right;
            padding: 16px 0 0 0;
            color: #696d81;
            font-size: 0.95rem;
                display: flex;
        }
        
.result-container {
            border-radius: 8px;
            overflow: hidden;
            margin: 10px 0 20px 0;
            transition: transform 0.3s;
        }
        
.result-header {
            color: #696d81;
            padding: 10px 0 20px;
            font-size: 1.15rem;
            display: flex;
            align-items: center;
            gap: 10px;
	    justify-content: center;
        }        
#result {
               min-height: 1px;
    		font-size: 1.15rem;
    		line-height: 1.6;
    		padding: 20px;
		border-radius: 6px;
		    margin: 20px 20px 20px 0;
    	margin-bottom: 58px;
    	background: linear-gradient(0deg, #ffffff 80%, #ffffffb0);
	max-height: 50vh;
    	overflow: auto;
	    border: 1px solid #fff;
        }       
.translation {
            font-size: 16px;
            padding-bottom: 18px;
            border-bottom: 1px solid #f0f0f0;
            color: #222;
		font-weight: 500;
        }
.alternatives {
            padding-top: 18px;
        }
        
.alternatives h4 {
            color: var(--main-color);
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 8px;
	font-size: 16px;
        }     
.alternatives ul {
            list-style-type: none;
        }       
.alternatives li {
            padding-left: 10px;
            margin-bottom: 16px;
            border-left: 4px solid #d1dfff;
            transition: all 0.3s;
	font-size: 15px;
        } 
.alternatives small {
            color: var(--main-color);
            background: rgba(106, 82, 255, 0.1);
            padding: 2px 8px;
            border-radius: 10px;
		text-wrap: nowrap;
        }
        
.btn-group {
            display: flex;
   	gap: 10px;
   	width: 270px;
   	flex-direction: row-reverse;
        }
        
.btn {
            flex: 1;
            padding: 10px;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 12px;
        }
        
.translate-btn {
            background: linear-gradient(113deg, #6472ff, #8352ff);
            color: white;	
	font-size: 16px;
	box-shadow: 0px 6px 20px -4px #5963ffbd;
        }
        
.translate-btn:hover {
            box-shadow: 0 10px 20px -8px rgba(89, 99, 255, 0.45);
	background: linear-gradient(113deg, #4c73ffd1, #6a52ffdb);
        }
.clear-btn {
            background: #fff;
            color: #f44336;
	border: 1px solid #e2e2f0;
	font-size: 16px;
	    box-shadow: 0 6px 20px -4px #c7c7da90;
        }
        
.clear-btn:hover {
            box-shadow: 0 10px 12px -8px rgba(255, 68, 68, 0.4);
	background: #f44336;
    	color: white;
    	border: 1px solid #f44336;
        }
        
.error {
            color: #ff4444;
            background: #fff0f0;
            padding: 18px;
            border-left: 4px solid #ff4444;
            line-height: 1.5;
        }
        
.error strong {
            font-weight: 600;
        }

.placeholder {
            color: var(--sidebar-text);
            text-align: center;
	    font-size: 14px;
	    line-height: 220px;
        }
        
.loading {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 15px;
            color: #696d81;
            font-weight: 500;
		font-size: 15px;
        }
.kuang {
	display: grid; 
	grid-template-columns: 1fr 1fr;
	gap: 20px;}   
.pulse {
            animation: pulseAnimation 2s infinite;
        }
        
        /* 添加复制按钮样式 */
        .copy-btn {
            background: #f0f4ff;
            color: var(--main-color);
            border: 1px solid #d1dfff;
            border-radius: 4px;
            padding: 4px 10px;
            margin-left: 10px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s;
        }
        .copy-btn:hover {
            background: var(--main-color);
            color: white;
        }
        .translation-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }
        .translation-text {
            font-size: 16px;
            line-height: 1.6;
        }     
@media (max-width: 768px) {
	.container {
                padding: 0;
		margin-bottom: 80px;
            }
	.lang-box {
		flex-direction: row;
		align-items: center;
		}          
	.lang-selector {
                gap: 10px;
		padding: 20px 14px 0;
            }           
	.swap-btn {
		
            }          
	.btn-group {
                flex-direction: column;
            }          
	.feature {
                padding: 12px 20px;
                font-size: 0.9rem;
            }
	.lang-label {
		margin-bottom: 0;
		display: none;
		}
	.kuang {
		display: flex;
    		flex-direction: column;
		}
	.text-area {
		padding: 16px 14px 0 14px;
		}
	#result {
		margin: 0 14px 16px 14px;
		padding: 14px;
		}
	.result-header{
		position: fixed;
    		bottom: 0;
    		margin: 0 auto;
        	left: 0;
        	right: 0;
		background: #ffffff00;
        	backdrop-filter: blur(20px);
        	-webkit-backdrop-filter: blur(20px);
		}
	textarea {
		min-height: 160px;
		padding: 14px;
		}
	.copy-btn {	
		display: none;
		}
	select {
		padding: 8px;
	        background-position: right 5px center;
		}
	.empty-state {
		min-height: 160px;
		padding: 16px;
		}
        }      
        


    </style>
</head>
<script defer src='https://static.cloudflareinsights.com/beacon.min.js' data-cf-beacon='{"token": "75e2a51e861e45ecaf33110ae42c67cd"}'></script>
<body>
<div id="global-sidebar"></div>
    <div class="container pulse">
        <header>
            <h2>高级翻译工具</h2>
            <p class="subtitle">多语言互译 · 精准快速 · 安全可靠</p>
        </header>
        
    <div style="background: radial-gradient(185% 35% at 100% 0%, #e6008100, #f1f1fb), linear-gradient(90deg, #118aff, #8180ff, #db7dff); border-radius: 12px;">
	<div class="lang-selector">
            <div class="lang-box">
		<div class="lang-label">源语言</div>
                <select id="sourceLang">
                    <option value="en">🇬🇧 英语 English</option>
                    <option value="zh-CN">🇨🇳 中文（简体）</option>
                    <option value="zh-TW">🇨🇳 中文（繁体）</option>
                    <option value="ja">🇯🇵 日语 日本語</option>
                    <option value="ko">🇰🇷 韩语 한국어</option>
                    <option value="fr">🇫🇷 法语 Français</option>
                    <option value="de">🇩🇪 德语 Deutsch</option>
		    <option value="es">🇪🇸 西班牙语 Español</option>
                    <option value="ru">🇷🇺 俄语 Русский язык</option>
                    <option value="ar">🇸🇦 阿拉伯语 اللغة العربية</option>
                    <option value="it">🇮🇹 意大利语 Italiano</option>
                    <option value="pt">🇵🇹 葡萄牙语 Português</option>
                    <option value="nl">🇳🇱 荷兰语 Dutch</option>
                    <option value="tr">🇹🇷 土耳其语 Türkçe</option>
                    <option value="sv">🇸🇪 瑞典语 Svenska</option>
                    <option value="pl">🇵🇱 波兰语 Polski</option>
                    <option value="da">🇩🇰 丹麦语 Dansk</option>
                    <option value="fi">🇫🇮 芬兰语 Suomen kieli</option>
                    <option value="no">🇳🇴 挪威语 Norsk</option>
                    <option value="el">🇬🇷 希腊语 ελληνικη</option>
                    <option value="cs">🇨🇿 捷克语 Čeština</option>
                    <option value="hu">🇭🇺 匈牙利语 Magyar</option>
                    <option value="ro">🇷🇴 罗马尼亚语 Limba Română</option>
                    <option value="sk">🇸🇰 斯洛伐克语 Slovenčina</option>
                    <option value="th">🇹🇭 泰语 ภาษาไทย</option>
                    <option value="id">🇮🇩 印尼语 Bahasa</option>
                    <option value="vi">🇻🇳 越南语 Tiếng Việt</option>
                    <option value="he">🇮🇱 希伯来语 עברית</option>
                    <option value="hi">🇮🇳 印地语 हिन्दी</option>
                    <option value="bg">🇧🇬 保加利亚语 Български</option>
                    <option value="uk">🇺🇦 乌克兰语 Українська</option>
                </select>
            </div>
            
            <button class="swap-btn" id="swapBtn">
                <img class="ico" src="img/zhongzhi1.svg"></img>
            </button>
            
            <div class="lang-box">
		<div class="lang-label">目标语言</div>
                <select id="targetLang">
                    <option value="zh-CN">🇨🇳 中文（简体）</option>
                    <option value="zh-TW">🇨🇳 中文（繁体）</option>
                    <option value="en">🇬🇧 英语 English</option>
                    <option value="ja">🇯🇵 日语 日本語</option>
                    <option value="ko">🇰🇷 韩语 한국어</option>
                    <option value="fr">🇫🇷 法语 Français</option>
                    <option value="de">🇩🇪 德语 Deutsch</option>
		    <option value="es">🇪🇸 西班牙语 Español</option>
                    <option value="ru">🇷🇺 俄语 Русский язык</option>
                    <option value="ar">🇸🇦 阿拉伯语 اللغة العربية</option>
                    <option value="it">🇮🇹 意大利语 Italiano</option>
                    <option value="pt">🇵🇹 葡萄牙语 Português</option>
                    <option value="nl">🇳🇱 荷兰语 Dutch</option>
                    <option value="tr">🇹🇷 土耳其语 Türkçe</option>
                    <option value="sv">🇸🇪 瑞典语 Svenska</option>
                    <option value="pl">🇵🇱 波兰语 Polski</option>
                    <option value="da">🇩🇰 丹麦语 Dansk</option>
                    <option value="fi">🇫🇮 芬兰语 Suomen kieli</option>
                    <option value="no">🇳🇴 挪威语 Norsk</option>
                    <option value="el">🇬🇷 希腊语 ελληνικη</option>
                    <option value="cs">🇨🇿 捷克语 Čeština</option>
                    <option value="hu">🇭🇺 匈牙利语 Magyar</option>
                    <option value="ro">🇷🇴 罗马尼亚语 Limba Română</option>
                    <option value="sk">🇸🇰 斯洛伐克语 Slovenčina</option>
                    <option value="th">🇹🇭 泰语 ภาษาไทย</option>
                    <option value="id">🇮🇩 印尼语 Bahasa</option>
                    <option value="vi">🇻🇳 越南语 Tiếng Việt</option>
                    <option value="he">🇮🇱 希伯来语 עברית</option>
                    <option value="hi">🇮🇳 印地语 हिन्दी</option>
                    <option value="bg">🇧🇬 保加利亚语 Български</option>
                    <option value="uk">🇺🇦 乌克兰语 Українська</option>
                </select>
            </div>
        </div>
	<div class="kuang">        
        <div class="text-area">
            <textarea id="text" placeholder="输入要翻译的文本..." rows="4" onblur="translateText()"></textarea>
            <div class="char-count"><span id="charCount">0</span> 字符 ( 限制500字 )</div>
        </div>
        <div id="result">
		<div class="empty-state">
        	<div class="empty-state-icon">📝</div>
        	<p>翻译结果将在这里显示</p>
    		</div>
	</div>
    </div>    
</div>
        <div class="result-container">
            <div class="result-header">
<div class="btn-group">
            <button class="btn translate-btn" onclick="translateText()">翻译文本
            </button>
            <button class="btn clear-btn" onclick="clearAll()">清空所有
            </button>
        </div>
</div>
            
        </div>
    </div>

    <script>
        // 支持的语言代码验证列表
        const validLanguages = new Set([
            'en', 'zh-CN', 'zh-TW', 'ja', 'ko', 'fr', 'de', 'es', 'ru', 'ar', 'it',
            'pt', 'nl', 'tr', 'sv', 'pl', 'da', 'fi', 'no', 'el', 'cs',
            'hu', 'ro', 'sk', 'th', 'id', 'vi', 'he', 'hi', 'bg', 'uk'
        ]);
        
        // 获取DOM元素
        const textInput = document.getElementById('text');
        const charCount = document.getElementById('charCount');
        const swapBtn = document.getElementById('swapBtn');
        
        // 字符计数功能
        textInput.addEventListener('input', function() {
            charCount.textContent = this.value.length;
        });
        
        // 语言交换功能
        swapBtn.addEventListener('click', function() {
            const sourceLang = document.getElementById('sourceLang');
            const targetLang = document.getElementById('targetLang');
            
            const tempValue = sourceLang.value;
            sourceLang.value = targetLang.value;
            targetLang.value = tempValue;
            
            // 添加交换动画效果
            swapBtn.style.transform = 'rotate(270deg)';
            setTimeout(() => {
                swapBtn.style.transform = 'rotate(90deg)';
            }, 300);
        });
        
        // 清空所有内容
        function clearAll() {
    textInput.value = '';
    document.getElementById('result').innerHTML = `
        <div class="empty-state">
            <div class="empty-state-icon">📝</div>
            <p>翻译结果将在这里显示</p>
        </div>
    `;
    charCount.textContent = '0';
}
        
        // 复制功能
        function copyToClipboard(text) {
            navigator.clipboard.writeText(text).then(() => {
                // 显示复制成功提示
                showNotification('复制成功!');
            }).catch(err => {
                console.error('复制失败:', err);
                showNotification('复制失败，请手动复制', true);
            });
        }
        
        // 显示通知
        function showNotification(message, isError = false) {
            const notification = document.createElement('div');
            notification.textContent = message;
            notification.style.position = 'fixed';
            notification.style.top = '20px';
            notification.style.right = '20px';
            notification.style.padding = '12px 20px';
            notification.style.background = isError ? '#ff4444' : '#4CAF50';
            notification.style.color = 'white';
            notification.style.borderRadius = '6px';
            notification.style.zIndex = '1000';
            notification.style.boxShadow = '0 4px 12px rgba(0,0,0,0.15)';
            notification.style.opacity = '0';
            notification.style.transition = 'opacity 0.3s';
            
            document.body.appendChild(notification);
            
            // 显示通知
            setTimeout(() => {
                notification.style.opacity = '1';
            }, 10);
            
            // 3秒后淡出并移除通知
            setTimeout(() => {
                notification.style.opacity = '0';
                setTimeout(() => {
                    document.body.removeChild(notification);
                }, 300);
            }, 3000);
        }
        
        // 翻译功能
        async function translateText() {
            const text = textInput.value.trim();
            const sourceLang = document.getElementById('sourceLang').value;
            const targetLang = document.getElementById('targetLang').value;
            const resultDiv = document.getElementById('result');

            try {
                // 输入验证
                if (!text) {
                    resultDiv.innerHTML = '<div class="placeholder">请输入要翻译的内容</div>';
                    return;
                }
                if (!validLanguages.has(sourceLang)) throw new Error('无效的源语言');
                if (!validLanguages.has(targetLang)) throw new Error('无效的目标语言');
                if (sourceLang === targetLang) {
                    throw new Error('源语言与目标语言不能相同');
                }

                resultDiv.innerHTML = `
                    <div class="loading">
                        <span>正在翻译，请稍候...</span>
                    </div>
                `;
    // 移除空状态
    if (resultDiv.querySelector('.empty-state')) {
        resultDiv.innerHTML = '';
    }
                // API请求参数调整
                const apiUrl = new URL('https://api.mymemory.translated.net/get');
                apiUrl.searchParams.append('q', text);
                apiUrl.searchParams.append('langpair', `${sourceLang}|${targetLang}`);
                
                // 添加随机参数避免缓存问题
                apiUrl.searchParams.append('_', Date.now());

                const response = await fetch(apiUrl);
                
                // 增强错误处理
                if (!response.ok) {
                    throw new Error(`网络错误 ${response.status}`);
                }

                const data = await response.json();
                
                if (data.responseStatus !== 200 || !data.responseData) {
                    const details = data.responseDetails || '未知错误';
                    throw new Error(`翻译服务错误: ${details}`);
                }

                // 结果显示优化
                const translation = data.responseData.translatedText;
                resultDiv.innerHTML = `
                    <div class="translation">
                        <div class="translation-header">
                            <div style="color:var(--main-color);">译文：</div>
                            <button class="copy-btn" onclick="copyToClipboard('${translation.replace(/'/g, "\\'")}')">复制</button>
                        </div>
                        <div class="translation-text">${translation}</div>
                    </div>
                    ${data.matches?.length > 0 ? `
                        <div class="alternatives">
                            <h4>其他建议：</h4>
                            <ul>
                                ${data.matches.slice(0,3).map(m => `
                                    <li>${m.translation} <small>${m.match}% 匹配</small></li>
                                `).join('')}
                            </ul>
                        </div>
                    ` : '<div class="alternatives"><p style="color:#777;font-style:italic;">没有找到其他翻译建议</p></div>'}
                `;

            } catch (error) {
    resultDiv.innerHTML = `
        <div class="empty-state">
            <div class="empty-state-icon">⚠️</div>
            <p>${error.message}</p>
        </div>
    `;
    console.error('翻译错误:', error);
            }
        }
        
        // 示例翻译
        window.onload = function() {
            textInput.value = "Hello, welcome to our advanced translation tool!";
            charCount.textContent = textInput.value.length;
            
            // 添加初始动画
            setTimeout(() => {
                document.querySelector('.container').classList.remove('pulse');
            }, 3000);
        };
    </script>
<script src="menu.js" defer></script>
</body>
</html>
