<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>在线PS工具 - 免费专业图片编辑器Photoshop</title>
 <script src="menu.js" defer></script>
<script defer src="https://cloud.umami.is/script.js" data-website-id="5a2e10cd-bf73-47df-be48-079c9ba7783c" data-domains="designtool.site"></script>
<link rel="icon" href="img/gongjuxiang.svg" type="image/svg">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: #1a2a6c;
            color: #f0f0f0;
            height: 100vh;
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }
.icon {
    display: inline-block;
    width: 1.2em;
    height: 1.2em;
    fill: currentColor;
}
        /* 编辑器容器 */
        .editor-container {
            flex: 1;
            position: relative;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            margin-left: 60px;
        }
        
        /* 编辑器框架 - 添加全屏属性 */
        #photopea-editor {
            flex: 1;
            width: 100%;
            border: none;
            background: #1e1e2a;
            display: block;
        }
        
        /* 状态提示 */
        .status-message, .fullscreen-hint {
            position: absolute;
            bottom: 90px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(25, 25, 35, 0.9);
            padding: 10px 20px;
            border-radius: 30px;
            font-size: 14px;
            color: #3498db;
            z-index: 5;
            display: flex;
            align-items: center;
            animation: fadeInOut 3s ease forwards;
        }
        
        .status-message i {
            margin-right: 8px;
            animation: pulse 1.5s infinite;
        }
        
        @keyframes fadeInOut {
            0% { opacity: 0; transform: translateX(-50%) translateY(20px); }
            20% { opacity: 1; transform: translateX(-50%) translateY(0); }
            80% { opacity: 1; transform: translateX(-50%) translateY(0); }
            100% { opacity: 0; transform: translateX(-50%) translateY(-10px); }
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.2); }
            100% { transform: scale(1); }
        }
        
        /* 响应式调整 */
        @media (max-width: 768px) {
           .editor-container {
                margin-left: 0;
            }
	.menu-toggle {
	top: 20px !important;}
        }
        
        /* 全屏提示 */
        .fullscreen-hint {
            bottom: 140px;
        }
        
        .fullscreen-hint i {
            margin-right: 8px;
        }
    </style>
</head>
<body>
<svg width="0" height="0" class="hidden">
  <symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640" id="expand-solid-full">
    <path d="M128 96C110.3 96 96 110.3 96 128L96 224C96 241.7 110.3 256 128 256C145.7 256 160 241.7 160 224L160 160L224 160C241.7 160 256 145.7 256 128C256 110.3 241.7 96 224 96L128 96zM160 416C160 398.3 145.7 384 128 384C110.3 384 96 398.3 96 416L96 512C96 529.7 110.3 544 128 544L224 544C241.7 544 256 529.7 256 512C256 494.3 241.7 480 224 480L160 480L160 416zM416 96C398.3 96 384 110.3 384 128C384 145.7 398.3 160 416 160L480 160L480 224C480 241.7 494.3 256 512 256C529.7 256 544 241.7 544 224L544 128C544 110.3 529.7 96 512 96L416 96zM544 416C544 398.3 529.7 384 512 384C494.3 384 480 398.3 480 416L480 480L416 480C398.3 480 384 494.3 384 512C384 529.7 398.3 544 416 544L512 544C529.7 544 544 529.7 544 512L544 416z"></path>
  </symbol>
  <symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640" id="spinner-solid-full">
    <path d="M272 112C272 85.5 293.5 64 320 64C346.5 64 368 85.5 368 112C368 138.5 346.5 160 320 160C293.5 160 272 138.5 272 112zM272 528C272 501.5 293.5 480 320 480C346.5 480 368 501.5 368 528C368 554.5 346.5 576 320 576C293.5 576 272 554.5 272 528zM112 272C138.5 272 160 293.5 160 320C160 346.5 138.5 368 112 368C85.5 368 64 346.5 64 320C64 293.5 85.5 272 112 272zM480 320C480 293.5 501.5 272 528 272C554.5 272 576 293.5 576 320C576 346.5 554.5 368 528 368C501.5 368 480 346.5 480 320zM139 433.1C157.8 414.3 188.1 414.3 206.9 433.1C225.7 451.9 225.7 482.2 206.9 501C188.1 519.8 157.8 519.8 139 501C120.2 482.2 120.2 451.9 139 433.1zM139 139C157.8 120.2 188.1 120.2 206.9 139C225.7 157.8 225.7 188.1 206.9 206.9C188.1 225.7 157.8 225.7 139 206.9C120.2 188.1 120.2 157.8 139 139zM501 433.1C519.8 451.9 519.8 482.2 501 501C482.2 519.8 451.9 519.8 433.1 501C414.3 482.2 414.3 451.9 433.1 433.1C451.9 414.3 482.2 414.3 501 433.1z"></path>
  </symbol>
</svg>
    
    <!-- 编辑器容器 -->
    <div class="editor-container">
        <!-- Photopea编辑器 - 添加全屏属性 -->
        <iframe id="photopea-editor" 
                allowfullscreen 
                allow="fullscreen" 
                webkitallowfullscreen 
                mozallowfullscreen></iframe>
        
        <!-- 状态提示 -->
        <div class="status-message hidden" id="statusMessage">
            <svg class="icon"><use xlink:href="#spinner-solid-full"></use></svg>
            <span id="statusText">正在加载编辑器...</span>
        </div>
        
        <!-- 全屏提示 -->
        <div class="fullscreen-hint" id="fullscreenHint">
            <svg class="icon"><use xlink:href="#expand-solid-full"></use></svg>
            <span>按F11或使用Photopea的全屏按钮</span>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const editorFrame = document.getElementById('photopea-editor');
            const statusMessage = document.getElementById('statusMessage');
            const statusText = document.getElementById('statusText');
            const fullscreenHint = document.getElementById('fullscreenHint');
            
            // 显示状态消息
            function showStatus(message) {
                statusText.textContent = message;
                statusMessage.classList.remove('hidden');
            }
            
            // 隐藏状态消息
            function hideStatus() {
                statusMessage.classList.add('hidden');
            }
            
            // 隐藏全屏提示
            function hideFullscreenHint() {
                fullscreenHint.style.opacity = '0';
                setTimeout(() => {
                    fullscreenHint.style.display = 'none';
                }, 500);
            }
            
            // 初始化加载编辑器
            function initEditor() {
                showStatus("正在启动编辑器...");
                
                // 确保全屏属性设置正确
                editorFrame.setAttribute('allowfullscreen', 'true');
                editorFrame.setAttribute('allow', 'fullscreen');
                editorFrame.setAttribute('webkitallowfullscreen', 'true');
                editorFrame.setAttribute('mozallowfullscreen', 'true');
                
                // 使用API模式直接启动编辑器（创建新文档）
                editorFrame.src = 'https://www.photopea.com#%7B%22files%22:%5B%22new%22%5D%7D';
                
                // 监听iframe加载完成
                editorFrame.onload = function() {
                    showStatus("编辑器已就绪");
                    
                    // 3秒后隐藏状态消息
                    setTimeout(hideStatus, 3000);
                    
                    // 5秒后隐藏全屏提示
                    setTimeout(hideFullscreenHint, 5000);
                };
                
                // 错误处理
                editorFrame.onerror = function() {
                    showStatus("加载失败，请重试");
                    
                    // 添加重试按钮
                    const retryBtn = document.createElement('button');
                    retryBtn.innerHTML = '<i class="fas fa-redo"></i> 重试';
                    retryBtn.style.marginLeft = '10px';
                    retryBtn.style.background = 'rgba(52, 152, 219, 0.3)';
                    retryBtn.style.color = 'white';
                    retryBtn.style.border = 'none';
                    retryBtn.style.padding = '5px 15px';
                    retryBtn.style.borderRadius = '15px';
                    retryBtn.style.cursor = 'pointer';
                    retryBtn.addEventListener('click', initEditor);
                    
                    statusMessage.appendChild(retryBtn);
                };
            }
            
            // 启动编辑器
            setTimeout(initEditor, 500);
        });
    </script>
</body>
</html>